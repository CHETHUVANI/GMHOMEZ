<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Map sitemap.xml to sitemap.php
RewriteRule ^sitemap\.xml$ sitemap.php [L]

# Let static files and essentials through
RewriteRule ^(uploads|assets)/ - [L]
RewriteRule ^(favicon\.ico|robots\.txt)$ - [L]

# Force HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Force primary host (www.gmhomez.in)
RewriteCond %{HTTP_HOST} !^www\.gmhomez\.in$ [NC]
RewriteRule ^ https://www.gmhomez.in%{REQUEST_URI} [R=301,L]

# Do not rewrite if the request maps to an existing file or directory
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Allow admin panels and builder admins to resolve their PHP files directly
RewriteRule ^(admin|prestige-admin|sobha)(/.*)?$ - [L]

# Front controller (fallback)
RewriteRule ^ index.php [L]
</IfModule>

# Security/quality of life (optional, safe defaults)
<IfModule mod_headers.c>
  Header always set X-Content-Type-Options "nosniff"
  Header always set X-Frame-Options "SAMEORIGIN"
  Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

Options -Indexes
